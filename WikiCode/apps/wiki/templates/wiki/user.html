<!--
    Copyright (C) 2016 Igor Soloduev <diahorver@gmail.com>

    This file is part of WikiCode.

    WikiCode is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    WikiCode is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with WikiCode.  If not, see <http://www.gnu.org/licenses/>.
-->
{% extends 'main.html' %}
{% load bootstrap3 %}
{% block page_name %}
    <div class="container" style="margin-top: 50px;">
        <div class="row">
            <br>
        </div>
    </div>
    <div class="container">
        <div class="row">
        </div>
    </div>
{% endblock %}
{% block content %}
    <div id="main-block" class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-4 col-md-4">
                <div class="row">
                    <a id="a-tree-manager" href="{% url 'tree_manager' %}"><label class="text-center btn-primary btn-block">ДЕРЕВО КОНСПЕКТОВ</label></a>
                </div>
                <div class="row">
                    <ul id="tree2">
                        <!--Здесь должно располгататься сгенерированное дерево пользователя -->
                        {{ preview_tree|safe }}
                    </ul>
                </div>
            </div>
            <div class="col-xs-12 col-sm-8 col-md-8"
                 style="border-left: 1px solid #d5d5d5;
                 min-height: 250px;">
                <div class="row">
                    <label class="text-center btn-primary btn-block">ИНФОРМАЦИЯ О ПОЛЬЗОВАТЕЛЕ</label>
                </div>
                <div class="row">
                    <div class="col-md-4 hidden-sm hidden-xs">
                        <div class="[ info-card ]">
                            <img style="width: 100%" src="http://placehold.it/240x240">

                            <div class="[ info-card-details ] animate">
                                <div class="[ info-card-header ]">
                                    <h1> {{ user.nickname }} </h1>

                                    <h3> {{ user.name }} </h3>
                                </div>
                                <div class="[ info-card-detail ]">
                                    <!-- Description -->
                                    <p>Вы можете поставить "like" этому пользователю</p>

                                    <div class="social">
                                        <a href=""
                                           class="[ social-icon facebook ] animate"><span
                                                class="fa fa-thumbs-o-up"></span></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8 col-sm-12">
                        <div class="row btn-block">
                            <div class="col-md-6 col-sm-6 col-xs-6" style="border-right: solid 1px #d5d5d5;">
                                <label class="text-left btn-block" id="title-elem-page">Имя</label>
                                <label class="text-left btn-block" id="title-elem-page">Никнейм</label>
                                <label class="text-left btn-block" id="title-elem-page">Почта</label>
                                <hr>
                                <label class="text-left btn-block" id="title-elem-page">Конспектов</label>
                                <label class="text-left btn-block" id="title-elem-page">Сохраненных</label>
                                <label class="text-left btn-block" id="title-elem-page">Комментировал</label>
                                <hr>
                                <label class="text-left btn-block" id="title-elem-page">Понравился раз</label>
                                <label class="text-left btn-block" id="title-elem-page">Его сохранили</label>
                                <label class="text-left btn-block" id="title-elem-page">Его комментировали</label>
                            </div>
                            <div class="col-md-6 col-sm-6  col-xs-6">
                                <label class="text-left btn-block">{{ user.name }}</label>
                                <label class="text-left btn-block">{{ user.nickname }}</label>
                                <label class="text-left btn-block">{{ user.email }}</label>
                                <hr>
                                <label class="text-left btn-block">{{ user.publications }}</label>
                                <label class="text-left btn-block">{{ user.imports }}</label>
                                <label class="text-left btn-block">{{ user.comments }}</label>
                                <hr>
                                <label class="text-left btn-block">{{ user.likes }} <i class="btn-link text-center" style="width: 60px;">Like!</i></label>
                                <label class="text-left btn-block">{{ user.imports_it }}</label>
                                <label class="text-left btn-block">{{ user.commented_it }}</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="tabbable-panel">
                        <div class="tabbable-line">
                            <ul class="nav nav-tabs ">
                                <li class="active">
                                    <a href="#tab_default_1" data-toggle="tab">
                                        Превью конспект </a>
                                </li>
                                <li>
                                    <a href="#tab_default_2" data-toggle="tab">
                                        Лучший конспект</a>
                                </li>
                                <li>
                                    <a href="#tab_default_3" data-toggle="tab">
                                        Последний конспект </a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane active" id="tab_default_1">
                                    <div class="container-fluid">
                                        <div class="row">
                                            <div class="col-md-8 col-xs-8">
                                                <h4 class="text-left" id="wiki-code-preview-title">Title this publication</h4>
                                            </div>
                                            <div class="col-md-4 col-xs-4 text-right">

                                                <a id="wiki-style-btn-read-preview-publ" class="btn text-center btn-block">
                                                    Читать
                                                </a>
                                            </div>

                                        </div>
                                    </div>
                                    <div id="wiki-code-prewiew-publ">
                                        <!--Здесь должен располагаться сгенерированный превью-конспект-->
                                    </div>
                                </div>
                                <div class="tab-pane" id="tab_default_2">
                                    <div class="container-fluid">
                                        <div class="row">
                                            <div class="col-md-8 col-xs-8">
                                                <h4 class="text-left">Title this publication</h4>
                                            </div>
                                            <div class="col-md-4 col-xs-4 text-right">

                                                <button id="wiki-style-btn" class="btn text-center btn-block">
                                                    Читать
                                                </button>
                                            </div>

                                        </div>
                                    </div>
                                    <p>
                                        Howdy, I'm in Tab 2.
                                    </p>

                                    <p>
                                        Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit
                                        lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure
                                        dolor in hendrerit in vulputate velit esse molestie consequat. Ut wisi enim ad
                                        minim veniam, quis nostrud exerci tation.
                                    </p>
                                </div>
                                <div class="tab-pane" id="tab_default_3">
                                    <div class="container-fluid">
                                        <div class="row">
                                            <div class="col-md-8 col-xs-8">
                                                <h4 class="text-left">Title this publication</h4>
                                            </div>
                                            <div class="col-md-4 col-xs-4 text-right">

                                                <button id="wiki-style-btn" class="btn text-center btn-block">
                                                    Читать
                                                </button>
                                            </div>

                                        </div>
                                    </div>
                                    <p>
                                        Howdy, I'm in Tab 3.
                                    </p>

                                    <p>
                                        Duis autem vel eum iriure dolor in hendrerit in vulputate. Ut wisi enim ad minim
                                        veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip
                                        ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in
                                        vulputate velit esse molestie consequat
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    {% load staticfiles %}
    <link rel="stylesheet" href="{% static 'wiki/highlight/styles/github.css'%}">
    <script type="text/javascript" src="{% static 'wiki/highlight/highlight.pack.js'%}"></script>
    <script>hljs.initHighlightingOnLoad();</script>
{% endblock %}

{% block add_script %}
    {% load staticfiles %}
    <link href={% static "wiki/wiki_styles/user.css" %} type="text/css" rel="stylesheet">

    <script>
    $(init);
        {% if prewiew_publ_text %}
            document.getElementById('wiki-code-prewiew-publ').innerHTML = marked("{{ prewiew_publ_text|escapejs }}");
            $("#wiki-code-preview-title").text("{{ prewiew_publ_title|escapejs }}");
            $("#wiki-style-btn-read-preview-publ").show();
            $("#wiki-style-btn-read-preview-publ").attr("href","/page/{{ prewiew_publ_id|escapejs }}");
        {% else %}
            document.getElementById('wiki-code-prewiew-publ').innerHTML = "<h4>Пользователь не указал свой preview конспект</h4>";
            $("#wiki-code-preview-title").text("");
            $("#wiki-style-btn-read-preview-publ").hide();
        {% endif %}
    </script>
{% endblock %}